{
    "scenario_type": "LANE_FOLLOW_V2",
    "stage_type": [
        "LANE_FOLLOW_V2_DEFAULT_STAGE"
    ],
    "stage_config": [
        {
            "stage_type": "LANE_FOLLOW_V2_DEFAULT_STAGE",
            "enabled": true,
            "task_type": [
                "TRAFFIC_RULE_DECIDER",
                "MISSION_DECIDER",
                "LATERAL_DECIDER",
                "LONGITUDINAL_DECIDER",
                "LONGITUDINAL_OPTIMIZER",
                "LATERAL_OPTIMIZER",
                "EVALUATION_DECIDER"
            ],
            "task_config": [
                {
                    "task_type": "TRAFFIC_RULE_DECIDER",
                    "traffic_rule_decider_config": {
                        "rule_destination": {
                            "enable": true,
                            "virtual_stop_wall_length": 1.0,
                            "virtual_stop_wall_width": 50.0
                        },
                        "rule_crosswalk": {
                            "enable": true
                        },
                        "rule_traffic_light": {
                            "enable": true
                        }
                    }
                },
                {
                    "task_type": "MISSION_DECIDER",
                    "mission_decider_config": {
                        "env_info": {
                            "invalid_lane": "invalid_lane",
                            "epsilon": 1e-10,
                            "force_lane_block_cnt": 3,
                            "default_spd_limit": 16.7,
                            "comf_low_spd_ratio_gate": 0.05,
                            "default_lc_finish_time": 13.0,
                            "default_lc_congestion_coeff": 1.3
                        },
                        "lc_request": {
                            "freeze_time": 8.0,
                            "enable_mannual_lc": true,
                            "enable_force_lc": true,
                            "enable_effi_lc": false,
                            "enable_hazard_right_lc": false,
                            "forc_distance_buffer": 1.0,
                            "forc_fast_pass_speed_rate": 1.1,
                            "forc_min_pass_speed": 1.0,
                            "confirm_cur_hazard_time": 0.8,
                            "confirm_hazard_clear_time": 10.0,
                            "speed_upper_bound": 40.0,
                            "effi_lc_speed_rate": 1.1,
                            "confirm_effi_lane_time": 1.0,
                            "front_ignore_dis": 150.0,
                            "front_ignore_time": 3.6,
                            "front_low_spd_confirm_time": 1.0,
                            "urgency_max": 3.0,
                            "urgency_min": 1.0,
                            "waiting_time": 0.5,
                            "ramp_size": 2,
                            "lc_look_forward_dis": 150.0
                        }
                    }
                },
                {
                    "task_type": "LATERAL_DECIDER",
                    "lateral_decider_config": {
                        "frenet_trajectory_sampler_lk": {
                            "dt": 0.1,
                            "dT": 0.1,
                            "t_total": 3.0,
                            "t_end": 8.0,
                            "cost_lon": {
                                "k": 1.0,
                                "k_j": 1.0,
                                "k_T": 1.0
                            },
                            "cost_lat": {
                                "k": 1.0,
                                "k_j": 1.0,
                                "k_T": 1.0,
                                "k_overshoot": 100.0,
                                "k_deviation": 10.0
                            }
                        },
                        "frenet_trajectory_sampler_lc": {
                            "dt": 0.1,
                            "dT": 0.1,
                            "t_total": 8.0,
                            "t_end": 8.0,
                            "cost_lon": {
                                "k": 1.0,
                                "k_j": 1.0,
                                "k_T": 1.0
                            },
                            "cost_lat": {
                                "k": 1.0,
                                "k_j": 1.0,
                                "k_T": 1.0,
                                "k_overshoot": 100.0,
                                "k_deviation": 10.0
                            }
                        },
                        "frenet_trajectory_sampler_nudge": {
                            "dt": 0.1,
                            "dT": 0.1,
                            "t_total": 4.0,
                            "t_end": 8.0,
                            "cost_lon": {
                                "k": 1.0,
                                "k_j": 1.0,
                                "k_T": 1.0
                            },
                            "cost_lat": {
                                "k": 1.0,
                                "k_j": 1.0,
                                "k_T": 1.0,
                                "k_overshoot": 100.0,
                                "k_deviation": 10.0
                            }
                        },
                        "corridor": {
                            "t_rear": 3.0,
                            "extra_half_width": 0.4,
                            "length_max": 300.0,
                            "length_min": 150.0,
                            "t_total": 10.0,
                            "v_min": 2.0,
                            "t_staging": 2.0,
                            "nudge": {
                                "delta_l_target": 0.5,
                                "num_l_target": 3,
                                "v_obs_min_to_enable_nudge": 3.0,
                                "v_relative_min_to_enable_nudge": 3.0,
                                "hysteresis_cycle_number": 3
                            },
                            "s_distance_thres": 20.0,
                            "lane_width_thres": 3.5,
                            "obs_collision_buffer": 0.6,
                            "t_obs_collision_check": 6.0,
                            "sample_dist_min": 2.0,
                            "t_forward_by_curvature_spd_limit": 3.0,
                            "obstacle_filter": {
                                "s_distance_obstacle_need_ignore": 100.0,
                                "a_need_ignore": -0.5
                            },
                            "v_target_coeff_table": [
                                [ 2.0, 1.0 ],
                                [ 8.0, 0.0 ]
                            ],
                            "a_lat_max_table": [
                                [ 9.0, 1.0 ],
                                [ 15.0, 0.95 ],
                                [ 30.0, 0.65 ],
                                [ 33.0, 0.60 ],
                                [ 48.0, 0.57 ] ],
                            "obs_collision_buffer_table": {
                                "regular_car": 1.5,
                                "large_car": 2.5,
                                "others": 1.5
                            }
                        }
                    }
                },
                {
                    "task_type": "LONGITUDINAL_DECIDER",
                    "longitudinal_decider_config": {
                        "speed_limit_builder": {
                            "a_lat_max_table": [
                                [ 9.0, 1.5 ],
                                [ 15.0, 1.4236 ],
                                [ 30.0, 0.97168 ],
                                [ 33.0, 0.91925 ],
                                [ 48.0, 0.86313 ] ],
                            "v_max": 26.5,
                            "t_sliding_window": 3.0
                        },
                        "st_topology_config": {
                            "alpha": 0.33
                        },
                        "st_proposal_config": {
                            "max_num_proposals": 2,
                            "w_front": 1.0,
                            "w_rear": 1.0,
                            "a_min_stiff": -6.0,
                            "cost_max": 20.0,
                            "t_start_blocking_max": 4.0,
                            "a_decel_limit": -4.5,
                            "a_accel_max_table": [
                                [ 5.0, 2.5 ],
                                [ 10.0, 1.2 ],
                                [ 20.0, 0.6 ],
                                [ 30.0, 0.3 ]
                            ],
                            "narrow_gap_cost_table": [
                                [ 0.0, 10.0 ],
                                [ 10.0, 0.0 ] ]
                        },
                        "st_graph_config": {
                            "lateral_buffer": 0.2,
                            "safety_l_buffer": 0.1,
                            "use_obs_sl_for_st_graph": true,
                            "t_plan": 8.0,
                            "fully_blocking_buffer": 0.1,
                            "st_boundary_counter_min": 1,
                            "delta_t_oncoming_obs": 1.0
                        }
                    }
                },
                {
                    "task_type": "LONGITUDINAL_OPTIMIZER",
                    "longitudinal_optimizer_config": {
                        "model": {
                            "dt": 0.2,
                            "num_steps": 25,
                            "num_states": 2,
                            "num_ctrls": 1,
                            "num_ctrl_rates": 1
                        },
                        "ref": {
                            "a_decel_speed_limit": -0.5,
                            "a_decel_obs": -0.5,
                            "a_accel_table": [
                                [ 5.0, 0.8 ],
                                [ 10.0, 0.6 ],
                                [ 20.0, 0.3 ],
                                [ 30.0, 0.1 ]
                            ]
                        },
                        "constraint": {
                            "front_stiff_padding_table": {
                                "regular_car": 4.0,
                                "large_car": 6.0,
                                "bicycle": 3.0,
                                "pedestrian": 3.0,
                                "virtual_fence": -1.0,
                                "others": 4.0
                            },
                            "rear_stiff_padding_table": {
                                "regular_car": 4.0,
                                "large_car": 6.0,
                                "bicycle": 3.0,
                                "pedestrian": 3.0,
                                "virtual_fence": -1.0,
                                "others": 4.0
                            },
                            "front_padding_speed_tolerance_table": [
                                [ 10.0, 3.0 ],
                                [ 15.0, 3.5 ],
                                [ 20.0, 4.2 ],
                                [ 25.0, 6.0 ],
                                [ 30.0, 8.0 ]
                            ],
                            "rear_padding_speed_tolerance_table": [
                                [ 15.0, 3.0 ],
                                [ 20.0, 4.5 ],
                                [ 25.0, 7.0 ],
                                [ 30.0, 10.0 ]
                            ],
                            "front_padding_relative_speed_multiplier_table": [
                                [ 0.0, 1.0 ],
                                [ 0.33, 0.7 ],
                                [ 0.67, 0.4 ],
                                [ 1.0, 0.1 ]
                            ],
                            "rear_padding_relative_speed_multiplier_table": [
                                [ 0.0, 1.0 ],
                                [ 0.33, 0.9 ],
                                [ 0.67, 0.8 ],
                                [ 1.0, 0.75 ]
                            ],
                            "front_soft_padding_table": [
                                [ 0.0, 2.5 ],
                                [ 5.0, 5.0 ],
                                [ 10.0, 14.0 ],
                                [ 15.0, 23.0 ],
                                [ 20.0, 32.0 ],
                                [ 25.0, 41.0 ],
                                [ 30.0, 50.0 ],
                                [ 35.0, 60.0 ],
                                [ 40.0, 68.0 ]
                            ],
                            "rear_soft_padding_table": [
                                [ 0.0, 2.5 ],
                                [ 5.0, 6.0 ],
                                [ 15.0, 18.0 ],
                                [ 30.0, 28.0 ]
                            ],
                            "v_soft_to_stiff": 3.0,
                            "a_max_stiff_table": [
                                [ 5.0, 1.0 ],
                                [ 10.0, 0.8 ],
                                [ 20.0, 0.5 ],
                                [ 30.0, 0.2 ]
                            ],
                            "a_max_soft_table": [
                                [ 5.0, 0.8 ],
                                [ 10.0, 0.6 ],
                                [ 20.0, 0.3 ],
                                [ 30.0, 0.1 ]
                            ],
                            "a_min_stiff": -3.0,
                            "a_min_soft_table": [
                                [ 5.0, -0.5 ],
                                [ 10.0, -0.7 ],
                                [ 20.0, -0.8 ],
                                [ 30.0, -1.0]
                            ],
                            "a_decel_speed_limit_violation": -1.0,
                            "j_max_stiff": 5.0,
                            "j_max_soft": 1.0,
                            "j_min_stiff": -6.0,
                            "j_min_soft": -1.0,
                            "constraint_padding_multiplier": 0.5
                        },
                        "cost": {
                            "Q": [ 1.0e-1, 1.0 ],
                            "R": [ 20.0 ],
                            "R_dot": [ 50.0 ],
                            "stiff_min": {
                                "s": 5.0e2,
                                "v": 5.0e2,
                                "a": 2.0e3,
                                "j": 2.0e3
                            },
                            "soft_min": {
                                "s": 1.5e1,
                                "v": 1.0e1,
                                "a": 1.0e2,
                                "j": 3.0e2
                            },
                            "stiff_max": {
                                "s": 5.0e2,
                                "v": 5.0e2,
                                "a": 4.0e3,
                                "j": 4.0e3
                            },
                            "soft_max": {
                                "s": 1.0e1,
                                "v": 1.0e1,
                                "a": 1.0e2,
                                "j": 3.0e2
                            }
                        },
                        "stop_hold": {
                            "s_tol": 1.0,
                            "v_min": 0.1
                        }
                    }
                },
                {
                    "task_type": "LATERAL_OPTIMIZER",
                    "lateral_optimizer_config": {
                        "model": {
                            "dt": 0.2,
                            "num_steps": 25,
                            "num_states": 4,
                            "num_ctrls": 1,
                            "num_ctrl_rates": 1
                        },
                        "ref": {
                            "dl_dt": 0.5
                        },
                        "constraint": {
                            "stiff_padding_table": {
                                "regular_car": 0.1,
                                "large_car": 0.1,
                                "bicycle": 0.1,
                                "pedestrian": 0.1,
                                "curb": 0.1,
                                "others": 0.1
                            },
                            "soft_padding_table": [
                                [ 0.0, 0.1 ],
                                [ 30.0, 0.1 ]
                            ],
                            "l_stiff_buffer": 0.0,
                            "l_soft_buffer": 0.0
                        },
                        "cost": {
                            "Q": [ 1.0, 0.0, 1.0, 0.0 ],
                            "R": [ 1.0 ],
                            "R_dot": [ 1.0 ],
                            "w_terminal": 10.0,
                            "stiff_min": {
                                "l": 5.0e2,
                                "l_dot": 5.0e2,
                                "psi": 5.0e2,
                                "psi_dot": 5.0e2,
                                "delta": 5.0e2,
                                "delta_dot": 5.0e2
                            },
                            "stiff_max": {
                                "l": 5.0e2,
                                "l_dot": 5.0e2,
                                "psi": 5.0e2,
                                "psi_dot": 5.0e2,
                                "delta": 5.0e2,
                                "delta_dot": 5.0e2
                            },
                            "soft_min": {
                                "l": 1.0e1,
                                "l_dot": 1.0e1,
                                "psi": 1.0e1,
                                "psi_dot": 1.0e1,
                                "delta": 1.0e1,
                                "delta_dot": 1.0e1
                            },
                            "soft_max": {
                                "l": 1.0e1,
                                "l_dot": 1.0e1,
                                "psi": 1.0e1,
                                "psi_dot": 1.0e1,
                                "delta": 1.0e1,
                                "delta_dot": 1.0e1
                            }
                        }
                    }
                },
                {
                    "task_type": "EVALUATION_DECIDER",
                    "evaluation_decider_config": {
                        "cost_max_limit": {
                            "safety": 10.0,
                            "progress": 0.5,
                            "comfort": 2.5,
                            "default": 10.0
                        },
                        "safety": {
                            "enable_debug_info": true,
                            "lc_max_collision_dangerous_cost": 7.5,
                            "lk_near_side_front_collision_coef": 0.6,
                            "lk_far_side_front_collision_coef": 0.3,
                            "dangerous_lc": {
                                "enable": true,
                                "max_cost": 3.5,
                                "min_front_dist": 4.0,
                                "min_back_dist": 3.0,
                                "max_back_dist": 25.0,
                                "delta_v_buf": 1.0,
                                "delta_v_min": 0.1,
                                "catch_up_t_max": 7.0,
                                "safety_time_table": [
                                    [ 2.0, 1.0 ],
                                    [ 5.0, 0.1 ],
                                    [ 7.0, 0.0 ]
                                ],
                                "v_coef": 1.1,
                                "v_coef_velocity": 90.0,
                                "filter_front_obs_in_st": false,
                                "filter_back_obs_in_st": false
                            },
                            "safety_cost_table": [
                                [ 0.00, 10.0 ],
                                [ 0.20, 8.0 ],
                                [ 0.50, 0.0 ]
                            ],
                            "safety_lon_cost_table": [
                                [ 3.00, 10.0 ],
                                [ 8.10, 3.0 ],
                                [ 20.00, 0.0 ]
                            ],
                            "safety_lat_cost_table": [
                                [ 0.3, 10.0 ],
                                [ 0.8, 3.0 ],
                                [ 1.2, 0.0 ]
                            ],
                            "collision_time_weight_table": [
                                [ 0.0, 1.0 ],
                                [ 2.4, 0.3 ],
                                [ 8.0, 0.0 ]
                            ],
                            "weight_lat_slack": {
                                "weight_x": [
                                    2.0,
                                    1.0,
                                    1.0,
                                    1.0
                                ],
                                "weight_u": [
                                    1.0
                                ],
                                "weight_u_dot": [
                                    1.0
                                ]
                            },
                            "weight_lon_slack": {
                                "weight_x": [
                                    2.0,
                                    1.0
                                ],
                                "weight_u": [
                                    0.2
                                ],
                                "weight_u_dot": [
                                    0.2
                                ]
                            }
                        },
                        "comfort": {
                            "weight_lat_slack": {
                                "weight_x": [
                                    0.6,
                                    0.6,
                                    0.6,
                                    0.6
                                ],
                                "weight_u": [
                                    0.6
                                ],
                                "weight_u_dot": [
                                    0.6
                                ]
                            },
                            "weight_lon_slack": {
                                "weight_x": [
                                    0.1,
                                    0.6
                                ],
                                "weight_u": [
                                    0.05
                                ],
                                "weight_u_dot": [
                                    0.05
                                ]
                            },
                            "time_weight_table": [
                                [ 0.0, 1.0 ],
                                [ 2.4, 0.3 ],
                                [ 8.0, 0.0 ]
                            ]
                        },
                        "progress": {
                            "progress_cost_table": [
                                [ 0.0, 0.0 ],
                                [ 0.5, 1.0 ]
                            ],
                            "exceed_diverged_pt_cost": 1.0
                        },
                        "similarity": {
                            "similarity_cost_table": [
                                [ 0.0, 0.0 ],
                                [ 8.0, 2.0 ]
                            ]

                        },
                        "lane_change": {
                            "urgency_cost_weight": 1.0,
                            "abortion_cost": 1.0,
                            "staging_cost_addition": 0.5,
                            "last_lc_finished_cost": 10.0,
                            "lc_forbidden_cost": 10.0
                        }
                    }
                }
            ]
        }
    ]
}
